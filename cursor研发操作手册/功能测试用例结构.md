# 功能测试用例结构 - 模板 (AI驱动范式)

**版本：** 1.0
**编写目的:** 本文档模板旨在为“以大模型为核心的智能驱动开发体系”提供一份标准、高效的功能测试用例结构。它不再是写给人类执行的繁琐步骤清单，而是为 **AI测试代理 (AI Testing Agent)** 设计的、清晰的 **“测试意图契约”**。其目标是让AI能够精准理解测试目标、上下文和验收标准，从而自主生成和执行测试脚本，并评估结果。

---

## 引言 (Preamble)

在AI驱动的开发范式中，测试用例的价值在于定义“行为的正确性”。我们不应过多关注UI元素的具体ID或点击路径，而应专注于描述 **用户意图、系统行为** 和 **最终应达成的状态**。这份结构化模板，就是实现这一目标的蓝图。

---

## 1. 测试元数据 (Test Metadata)

*本章定义了测试用例的身份和目的，为AI提供了最高层的上下文。*

*   **测试用例ID (Test Case ID):** `[例如: TC-LOGIN-001]`
    *   *说明：唯一的、可追溯的标识符。*
*   **关联需求/用户故事 (Requirement / User Story):** `[链接到PRD或Jira中的具体需求]`
    *   *说明：**（至关重要）** 将本测试与业务价值直接挂钩，让AI理解测试的“出身”和目的。*
*   **测试目标 (Test Objective):** `[一句话清晰描述本次测试的核心验证意图]`
    *   *说明：这是本测试的“灵魂”。例如：“验证标准用户无法访问管理员专属的后台设置页面”。*
*   **测试类型 (Test Type):** `[正向功能 | 负向/异常 | 边界值 | 安全性 | 兼容性]`
    *   *说明：告知AI本次测试的“心态”和侧重点。*
*   **优先级 (Priority):** `[P0-阻塞性 | P1-核心功能 | P2-次要功能 | P3-优化体验]`
    *   *说明：帮助AI和团队规划测试执行的顺序。*
*   **自动化潜力 (Automation Potential):** `[AI可完全自主 | 需人工辅助(HIL) | 仅限人工]`
    *   *说明：评估该测试对AI的友好程度。例如，需要扫码、物理操作的场景可能就需要人工辅助。*

---

## 2. 行为驱动描述 (Behavior-Driven Description)

*本章采用BDD（行为驱动开发）的Gherkin语法，以一种对人类和AI都友好的、声明式的方式描述测试场景。*

### 2.1 场景 (Scenario)
*   **场景:** `[用自然语言描述一个具体的测试情景，与“测试目标”保持一致]`
    *   *例如：标准用户尝试越权访问管理后台*

### 2.2 给定 (Given) - 前置条件
*   *说明：描述测试开始前，系统和用户必须处于的初始状态。AI应能自主完成这些准备工作。*
    *   **给定** 我是一个已认证的“标准用户”角色 (`role: standard_user`)
    *   **并且** 系统中存在一个“管理员后台”页面，其访问路径为 `/admin/settings`
    *   **并且** 我的账户没有被禁用

### 2.3 当 (When) - 触发行为
*   *说明：描述用户执行的关键动作或系统发生的某个触发事件。应描述“做什么”，而不是“怎么做”。*
    *   **当** 我尝试直接通过URL访问“管理员后台”页面

### 2.4 那么 (Then) - 验收标准
*   *说明：**（核心部分）** 定义在行为发生后，系统必须满足的一系列可观测、可验证的“状态断言”。这是AI判断测试成功与否的依据。*
    *   **那么** 我应该看到一个“访问被拒绝”的提示信息
        *   *类型: UI断言*
        *   *关键元素: 页面标题或特定组件的文本内容应包含“Access Denied”或“无权访问”*
    *   **并且** 我当前的URL应该被重定向到 `/403-forbidden` 页面
        *   *类型: 行为断言*
        *   *关键元素: 浏览器URL*
    *   **并且** 我的用户会话（Session）不应被销毁
        *   *类型: 状态断言*
        *   *关键元素: 用户应保持登录状态*
    *   **并且** 系统的安全日志中必须记录一次失败的越权访问尝试
        *   *类型: 数据断言*
        *   *关键元素: 后端日志或数据库表中应有相应记录*

---

## 3. 测试数据 (Test Data)

*本章将测试用例中的变量进行结构化定义，实现数据与逻辑的分离。*

*   **用户账户 (User Account):**
    ```yaml
    username: test_standard_user@example.com
    password: Password123!
    role: standard_user
    ```
*   **目标路径 (Target Path):**
    ```yaml
    path: /admin/settings
    ```

---

## 4. 后置条件与清理 (Post-conditions & Teardown)

*本章描述测试完成后需要执行的清理工作，确保测试环境的可重复性。*

*   **清理步骤1:** 登出当前用户。
*   **清理步骤2:** (如果适用) 删除本次测试创建的任何临时数据。

---

## 5. 备注 (Notes)

*提供额外信息，帮助人类或AI更好地理解测试背景。*

*   *本测试用例是`[某某安全规范]`的具体实现。*
*   *在`[v2.1]`版本之前，此行为会导致页面白屏，而非正确跳转。* 